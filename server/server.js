!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/server/",r(r.s=106)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("prop-types")},function(e,t){e.exports=require("@material-ui/core/styles")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("react-router-dom")},function(e,t,r){var n=r(70),a="undefined"!=typeof window,o="https://michaelumansky.com/barcoordinator",i=n.create({baseURL:o,headers:{"cache-control":"no-cache"}});e.exports={isProduction:!0,isDebug:!1,isClient:a,basename:"/barcoordinator",apiEndpoint:o,axiosInstance:i}},function(e,t){e.exports=require("core-js/modules/es.array.concat")},function(e,t){e.exports=require("core-js/modules/es.symbol")},function(e,t){e.exports=require("recompose")},function(e,t){e.exports=require("core-js/modules/es.object.define-property")},function(e,t){e.exports=require("core-js/modules/es.object.to-string")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("@material-ui/core/Button")},function(e,t){e.exports=require("core-js/modules/es.object.keys")},function(e,t){e.exports=require("core-js/modules/web.dom-collections.for-each")},function(e,t){e.exports=require("core-js/modules/es.array.for-each")},function(e,t){e.exports=require("core-js/modules/es.array.index-of")},function(e,t){e.exports=require("@material-ui/core/IconButton")},function(e,t){e.exports=require("core-js/modules/es.object.get-own-property-descriptor")},function(e,t){e.exports=require("core-js/modules/es.array.filter")},function(e,t){e.exports=require("core-js/modules/web.dom-collections.iterator")},function(e,t){e.exports=require("core-js/modules/es.string.iterator")},function(e,t){e.exports=require("core-js/modules/es.array.iterator")},function(e,t){e.exports=require("core-js/modules/es.symbol.iterator")},function(e,t){e.exports=require("core-js/modules/es.symbol.description")},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("uuid/v1")},function(e,t){e.exports=require("core-js/modules/es.array.map")},function(e,t){e.exports=require("@material-ui/styles")},function(e,t){e.exports=require("core-js/modules/es.object.assign")},function(e,t){e.exports=require("core-js/modules/es.function.name")},function(e,t){e.exports=require("@material-ui/core/ListItem")},function(e,t){e.exports=require("react-places-autocomplete")},function(e,t){e.exports=require("core-js/modules/es.object.set-prototype-of")},function(e,t){e.exports=require("core-js/modules/es.object.get-prototype-of")},function(e,t){e.exports=require("core-js/modules/es.object.create")},function(e,t){e.exports=require("@material-ui/core/DialogActions")},function(e,t){e.exports=require("@material-ui/core/Dialog")},function(e,t){e.exports=require("query-string")},function(e,t){e.exports=require("react-google-maps")},function(e,t){e.exports=require("@material-ui/core/TextField")},function(e,t){e.exports=require("passport")},function(e,t){e.exports=require("core-js/modules/es.array.find-index")},function(e,t){e.exports=require("core-js/modules/es.promise")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("@material-ui/core/MenuItem")},function(e,t){e.exports=require("core-js/modules/es.array.is-array")},function(e,t){e.exports=require("regenerator-runtime/runtime")},function(e,t){e.exports=require("@material-ui/core/DialogTitle")},function(e,t){e.exports=require("@material-ui/core/DialogContent")},function(e,t){e.exports=require("@material-ui/core/CircularProgress")},function(e,t){e.exports=require("@material-ui/core/List")},function(e,t){e.exports=require("@material-ui/core/Menu")},function(e,t){e.exports=require("@material-ui/core/Typography")},function(e,t){e.exports=require("@material-ui/core/AppBar")},function(e,t){e.exports=require("react-router-redux")},function(e,t){e.exports=require("react-router-config")},function(e,t){e.exports=require("bcrypt-nodejs")},function(e,t){e.exports=require("yup")},function(e,t){e.exports=require("core-js/modules/es.string.search")},function(e,t){e.exports=require("core-js/modules/es.regexp.exec")},function(e,t){e.exports=require("core-js/modules/es.regexp.to-string")},function(e,t){e.exports=require("core-js/modules/es.date.to-string")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("express-session")},function(e,t){e.exports=require("react-scroll")},function(e,t){e.exports=require("@material-ui/core/Badge")},function(e,t){e.exports=require("@material-ui/icons/DirectionsWalk")},function(e,t){e.exports=require("core-js/modules/es.array.from")},function(e,t){e.exports=require("core-js/modules/web.timers")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("connect-mongo")},function(e,t){e.exports=require("helmet")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("passport-facebook")},function(e,t){e.exports=require("passport-local")},function(e,t){e.exports=require("redux-logger")},function(e,t){e.exports=require("redux-thunk")},function(e,t){e.exports=require("@material-ui/core/ListItemText")},function(e,t){e.exports=require("@material-ui/core/DialogContentText")},function(e,t){e.exports=require("@material-ui/icons/Search")},function(e,t){e.exports=require("reselect")},function(e,t){e.exports=require("@material-ui/icons/Place")},function(e,t){e.exports=require("@material-ui/icons/Group")},function(e,t){e.exports=require("@material-ui/icons/AddCircleOutline")},function(e,t){e.exports=require("@material-ui/icons/Done")},function(e,t){e.exports=require("@material-ui/icons/ArrowUpward")},function(e,t){e.exports=require("formik")},function(e,t){e.exports=require("@material-ui/icons/Clear")},function(e,t){e.exports=require("@material-ui/core/ListItemIcon")},function(e,t){e.exports=require("@material-ui/icons/AccountBox")},function(e,t){e.exports=require("@material-ui/core/Toolbar")},function(e,t){e.exports=require("serialize-javascript")},function(e,t){e.exports=require("@material-ui/core/colors/red")},function(e,t){e.exports=require("react-dom/server")},function(e,t,r){"use strict";r.r(t);r(10),r(43),r(47);var n=r(44),a=r.n(n),o=r(41),i=r.n(o),s=(r(6),r(62),r(61),r(0)),c=r.n(s),u=r(94),l=r(4),p=r(56),f=r(3),d=r(2),m=r(28),h=r(93),S=r.n(h),y=r(92),b=r.n(y),E=r(1),O=r.n(E),g=(r(7),r(24),r(23),r(22),r(35),r(9),r(34),r(33),r(21),r(20),r(12)),R=r.n(g),v=r(40),_=r.n(v),I=(r(105),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.trim(),n=t.trim(),a="",o="";return""===r&&(a="Username is required"),""===n&&(o="Password is required"),/[^a-zA-Z0-9_-]/g.test(r)&&(a="Username must contain only letters, digits, underscore and hyphen"),r&&!/[a-zA-Z0-9]/g.test(r)&&(a=a?"".concat(a," and username "):"Username ",a+="must contain at least one letter or digit"),/[^a-zA-Z0-9]/g.test(n)&&(o="Password must contain only letters and digits"),{usernameError:a,passwordError:o}}),C=(r(42),r(5)),x=function(e){var t=e.classes,r=e.startFacebookLogin,n=e.bars,a=e.barId,o="";if(a){var i=n[n.findIndex(function(e){return e.id===a})].placeId;o="?barId=".concat(a,"&placeId=").concat(i)}return c.a.createElement("div",{className:t.wrapper},c.a.createElement("div",{className:t.component},c.a.createElement("div",{className:t.text},"SIGN IN WITH"),c.a.createElement("div",{className:t.item},c.a.createElement("a",{href:"".concat(C.basename,"/auth/facebook").concat(o),onClick:r},c.a.createElement("svg",{className:t.icon},c.a.createElement("path",{d:"M22.676 0H1.324C.593 0 0 .593 0 1.324v21.352C0 23.408.593 24 1.324 24h11.494v-9.294H9.689v-3.621h3.129V8.41c0-3.099 1.894-4.785 4.659-4.785 1.325 0 2.464.097 2.796.141v3.24h-1.921c-1.5 0-1.792.721-1.792 1.771v2.311h3.584l-.465 3.63H16.56V24h6.115c.733 0 1.325-.592 1.325-1.324V1.324C24 .593 23.408 0 22.676 0"}))))),c.a.createElement("div",{className:t.privacy},c.a.createElement("a",{href:"".concat(C.basename,"/privacypolicy"),target:"_blank",rel:"noopener noreferrer"},"Privacy Policy")))},w=Object(d.withStyles)({wrapper:{padding:"1em",display:"inline-block",maxWidth:"100%",textAlign:"center"},component:{display:"flex",height:"24px",alignItems:"center",justifyContent:"center"},text:{display:"inline-block",fontWeight:500,fontFamily:"Roboto, sans-serif",padding:"0 5px 0 0",color:"#989898"},item:{display:"inline-block",padding:"0 0 0 10px",position:"relative",width:"24px",height:"24px",cursor:"pointer"},icon:{width:"24px",height:"24px",position:"absolute",transform:"translate(-50%, -50%)",top:"50%",left:"50%",fill:"#3B5998"},privacy:{paddingTop:10,fontSize:".8rem",textAlign:"center","& > a":{textDecoration:"underline !important",color:"blue"}}})(x);x.propTypes={classes:O.a.shape({}).isRequired,startFacebookLogin:O.a.func.isRequired,bars:O.a.arrayOf(O.a.shape({})),barId:O.a.string},x.defaultProps={bars:[],barId:""};r(27),r(104),r(30);var N={MANUAL_LOGIN_USER:"MANUAL_LOGIN_USER",LOGIN_SUCCESS_USER:"LOGIN_SUCCESS_USER",LOGIN_ERROR_USER:"LOGIN_ERROR_USER",FACEBOOK_LOGIN_SUCCESS:"FACEBOOK_LOGIN_SUCCESS",FACEBOOK_LOGIN_ADD_SUCCESS:"FACEBOOK_LOGIN_ADD_SUCCESS",FACEBOOK_LOGIN_ADD_ERROR:"FACEBOOK_LOGIN_ADD_ERROR",FETCH_USER:"FETCH_USER",FETCH_USER_SUCCESS:"FETCH_USER_SUCCESS",FETCH_USER_ERROR:"FETCH_USER_ERROR",SIGNUP_USER:"SIGNUP_USER",SIGNUP_SUCCESS_USER:"SIGNUP_SUCCESS_USER",SIGNUP_ERROR_USER:"SIGNUP_ERROR_USER",LOGOUT_USER:"LOGOUT_USER",LOGOUT_SUCCESS_USER:"LOGOUT_SUCCESS_USER",LOGOUT_ERROR_USER:"LOGOUT_ERROR_USER",START_FACEBOOK_LOGIN:"START_FACEBOOK_LOGIN",END_FACEBOOK_LOGIN:"END_FACEBOOK_LOGIN",SHOW_BASKET_SUCCESS:"SHOW_BASKET_SUCCESS",SHOW_BASKET_ERROR:"SHOW_BASKET_ERROR",CLOSE_BASKET:"CLOSE_BASKET",FIND_LOCATION:"FIND_LOCATION",FIND_LOCATION_SUCCESS:"FIND_LOCATION_SUCCESS",FIND_LOCATION_ERROR:"FIND_LOCATION_ERROR",FIND_BARS:"FIND_BARS",FIND_BARS_SUCCESS:"FIND_BARS_SUCCESS",FIND_BARS_ERROR:"FIND_BARS_ERROR",BEGIN_ADD_BAR:"BEGIN_ADD_BAR",BEGIN_REMOVE_BAR:"BEGIN_REMOVE_BAR",ADD_BAR_SUCCESS:"ADD_BAR_SUCCESS",REMOVE_BAR_SUCCESS:"REMOVE_BAR_SUCCESS",REMOVE_BAR_ERROR:"REMOVE_BAR_ERROR",ADD_BAR_ERROR:"ADD_BAR_ERROR",ZERO_RESULTS_SEARCH_ERROR:"ZERO_RESULTS_SEARCH_ERROR",SAVE_PATH:"SAVE_PATH",SAVE_GUEST_BAR:"SAVE_GUEST_BAR",OPEN_LOGIN_DIALOG:"OPEN_LOGIN_DIALOG",CLOSE_LOGIN_DIALOG:"CLOSE_LOGIN_DIALOG",SHOW_MESSAGE_DIALOG:"SHOW_MESSAGE_DIALOG",CLOSE_MESSAGE_DIALOG:"CLOSE_MESSAGE_DIALOG",OPEN_LOGIN_MENU:"OPEN_LOGIN_MENU",CLOSE_LOGIN_MENU:"CLOSE_LOGIN_MENU",HIGHLIGHT_PLACE:"HIGHLIGHT_PLACE",BEGIN_SHOW_VISITORS_LIST:"BEGIN_SHOW_VISITORS_LIST",SHOW_VISITORS_LIST_SUCCESS:"SHOW_VISITORS_LIST_SUCCESS",SHOW_VISITORS_LIST_ERROR:"SHOW_VISITORS_LIST_ERROR",CLOSE_VISITORS_LIST:"CLOSE_VISITORS_LIST",INCREMENT_VISITORS_COUNT:"INCREMENT_VISITORS_COUNT",DECREMENT_VISITORS_COUNT:"DECREMENT_VISITORS_COUNT",ADD_BAR_TO_USER:"ADD_BAR_TO_USER",REMOVE_BAR_FROM_USER:"REMOVE_BAR_FROM_USER",SESSION_EXPIRED:"SESSION_EXPIRED",BEGIN_SHOW_BASKET:"BEGIN_SHOW_BASKET",SET_MAP_SERVICE:"SET_MAP_SERVICE",SET_USER_DATA:"SET_USER_DATA"},T=(r(16),r(55));function A(e){return{type:N.SHOW_MESSAGE_DIALOG,message:e}}function U(){return{type:N.OPEN_LOGIN_DIALOG}}function k(){return{type:N.CLOSE_LOGIN_DIALOG}}function L(){return{type:N.SESSION_EXPIRED}}function j(e,t){return function(r,n){-1===n().reducer.user.bars.indexOf(e)&&(r(function(e){return{type:N.INCREMENT_VISITORS_COUNT,barId:e}}(e)),r(function(e){return{type:N.ADD_BAR_TO_USER,barId:e}}(e)),r(A(t))),r({type:N.ADD_BAR_SUCCESS})}}function P(e){return{type:N.ADD_BAR_ERROR,message:e}}function B(e){return{type:N.REMOVE_BAR_ERROR,message:e}}function D(e,t){return function(r,n){-1!==n().reducer.user.bars.indexOf(e)&&(r(function(e){return{type:N.DECREMENT_VISITORS_COUNT,barId:e}}(e)),r(function(e){return{type:N.REMOVE_BAR_FROM_USER,barId:e}}(e)),r(A(t))),r({type:N.REMOVE_BAR_SUCCESS})}}function q(e){return function(t){return t({type:N.BEGIN_SHOW_VISITORS_LIST}),C.axiosInstance.get("/visitors",{params:{barId:e}}).then(function(e){t(function(e){return{type:N.SHOW_VISITORS_LIST_SUCCESS,visitors:e}}(e.data.visitors))}).catch(function(){t(function(e){return{type:N.SHOW_VISITORS_LIST_ERROR,message:e}}("Unable to perform requested operation"))})}}function G(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(n,a){var o=a().reducer.user.userId,i=a().reducer.location.bars,s=i[i.findIndex(function(t){return t.id===e})].placeId,c={barId:e,placeId:s,userId:o};return n({type:N.BEGIN_ADD_BAR}),C.axiosInstance.post("/addBar",c).then(function(){n(j(c.barId,"You have successfully added to the list!")),r&&t.push({pathname:"/return-from-success-login"})}).catch(function(e){e.response&&("401"===e.response.status&&(n(L()),n(P("You are not logged in"))),"403"===e.response.status&&n(P("You are logged in to another account"))),n(P("Your request could not be completed"))})}}function F(e,t){return function(r,n){var a=n().reducer.user.userId,o={barId:e,placeId:t,userId:a};return r({type:N.BEGIN_REMOVE_BAR}),C.axiosInstance.post("/removeBar",o).then(function(){r(D(o.barId,"You have successfully removed from the list!"))}).catch(function(e){e.response&&("401"===e.response.status&&(r(L()),r(B("You are not logged in"))),"403"===e.response.status&&r(B("You are logged in to another account"))),r(B("Your request could not be completed"))})}}function M(e){return{type:N.HIGHLIGHT_PLACE,barId:e}}function H(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function V(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){H(o,n,a,i,s,"next",e)}function s(e){H(o,n,a,i,s,"throw",e)}i(void 0)})}}function W(e){return{type:N.SIGNUP_ERROR_USER,message:e}}function K(e,t){return function(r,n){return r({type:N.MANUAL_LOGIN_USER}),C.axiosInstance.post("/login",e).then(function(a){if(r(function(e,t,r,n){return{type:N.LOGIN_SUCCESS_USER,message:n,username:e,bars:t,userId:r}}(e.username,a.data.bars,a.data.userId,"You have been successfully logged in!")),n().reducer.guestBar){var o=n().reducer.guestBar;r(G(o,t,!0))}}).catch(function(){r(function(e){return{type:N.LOGIN_ERROR_USER,message:e}}("Invalid username or password"))})}}function z(e,t){return function(r,n){return r({type:N.SIGNUP_USER}),C.axiosInstance.post("/signup",e).then(function(a){if(r(function(e,t,r){return{type:N.SIGNUP_SUCCESS_USER,message:r,username:e,userId:t}}(e.username,a.data.userId,"You have successfully registered an account!")),n().reducer.guestBar){var o=n().reducer.guestBar;r(G(o,t,!0))}}).catch(function(e){e.response&&"409"===e.response.status?r(W("This username is already in use")):r(W("Something went wrong when signing up"))})}}function Y(e,t){return $.apply(this,arguments)}function $(){return($=V(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){var n={placeId:r,fields:["name","vicinity"]};t.getDetails(n,function(t,r){r==google.maps.places.PlacesServiceStatus.OK?e(t):e({})})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Z(e){return{type:N.SHOW_BASKET_SUCCESS,basketList:e}}function Q(e){var t=e.username,r=e.profile,n=e.id,a=e.bars;return{type:N.SET_USER_DATA,username:t,profile:r,userId:n,bars:a}}var X=Object(f.connect)(function(e){var t=e.reducer;return{barId:t.guestBar,bars:t.location.bars}},{startFacebookLogin:function(){return{type:N.START_FACEBOOK_LOGIN}}})(w),J=r(26),ee=r.n(J),te=r(54),re=r.n(te),ne=r(91),ae=r.n(ne),oe=r(53),ie=r.n(oe),se=r(17),ce=r.n(se),ue=r(90),le=r.n(ue),pe=r(67),fe=r.n(pe),de=r(52),me=r.n(de),he=r(45),Se=r.n(he),ye=r(66),be=r.n(ye),Ee=r(31),Oe=r.n(Ee),ge=r(89),Re=r.n(ge),ve=r(51),_e=r.n(ve);r(19),r(15),r(18),r(13),r(14);function Ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ce=function(e){var t=e.classes,r=e.style,n=e.className;return c.a.createElement("div",{className:"".concat(t.splitter," ").concat(n),style:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Ie(e,t,r[t])})}return e}({},r)})},xe=Object(d.withStyles)({splitter:{height:"3px",minHeight:"3px",background:"white"}})(Ce);Ce.propTypes={className:O.a.string,classes:O.a.shape({}),style:O.a.shape({})},Ce.defaultProps={className:"",classes:{},style:{}};var we=r(88),Ne=r.n(we),Te=Object(d.makeStyles)({icon:{color:"#EA9A9A",fontSize:36},button:{},itemWrapper:{background:"#eee"},item:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},itemDetails:{display:"flex",flexDirection:"column",justifyContent:"flex-end"},itemName:{fontSize:"1.4rem",color:"#1D9CF2"},itemAddress:{fontSize:"1rem",color:"#555"}});function Ae(e){var t=e.name,r=e.address,n=e.removeItem,a=Te();return c.a.createElement("div",{className:a.item},c.a.createElement("div",{className:a.itemDetails},c.a.createElement("div",{className:a.itemName},t),c.a.createElement("div",{className:a.itemAddress},r)),c.a.createElement("div",{className:a.itemAction},c.a.createElement(ce.a,{className:a.button,"aria-label":"Remove from list",title:"Remove from list",onClick:n},c.a.createElement(Ne.a,{className:a.icon}))))}var Ue=Ae;Ae.propTypes={removeItem:O.a.func.isRequired,name:O.a.string,address:O.a.string},Ae.defaultProps={name:"",address:""};var ke=Object(d.makeStyles)({basket:{borderRadius:0,"overflow-y":"hidden",minWidth:"200px","@media (min-width: 450px)":{width:"400px"},"&>*":{padding:0}},container:{maxHeight:"calc(100vh - 100px)",position:"relative","overflow-y":"hidden","@media (min-heght: 600px)":{maxHeight:"500px"}},header:{height:"48px",outline:"none",background:"#211E1E",color:"#fff",justifyContent:"center",paddingLeft:"16px"},title:{fontWeight:900,fontSize:"1.5em"},list:{outline:"none",marginTop:"48px",maxHeight:"calc(100vh - 148px)",padding:0,"overflow-y":"auto","@media (min-height: 600px)":{maxHeight:"452px"}},emptyItem:{fontSize:"1.4rem",color:"#555"}});function Le(e){var t=e.removeBarFomBasket,r=e.basketList,n=e.anchorEl,a=e.open,o=e.onClose,i=ke();return c.a.createElement(me.a,{id:"basket-menu",classes:{paper:i.basket},anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:a,onClose:o},c.a.createElement("div",{className:i.container},c.a.createElement(re.a,{className:i.header,position:"absolute"},c.a.createElement(ie.a,{color:"inherit",className:i.title},"My Places")),c.a.createElement(_e.a,{classes:{root:i.list}},r.length>0?r.map(function(e,r){var n=e.name,a=e.address,o=e.barId,s=function(e,r){return function(n){n.preventDefault(),n.stopPropagation(),t(e,r)}}(o,e.placeId);return c.a.createElement("div",{key:o},r>0&&c.a.createElement("div",{style:{background:"#eee"}},c.a.createElement(xe,{style:{width:"90%",height:"1px",minHeight:"1px"}})),c.a.createElement(Oe.a,{classes:{root:i.itemWrapper}},c.a.createElement(Ue,{name:n,address:a,removeItem:s})))}):c.a.createElement(Oe.a,{classes:{root:i.itemWrapper}},c.a.createElement("div",{className:i.emptyItem},"You have not yet chosen a bar")))))}var je=Object(f.connect)(null,{removeBarFomBasket:function(e,t){return F(e,t)}})(Le);function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Le.propTypes={basketList:O.a.arrayOf(O.a.shape({})),onClose:O.a.func.isRequired,removeBarFomBasket:O.a.func.isRequired,anchorEl:O.a.shape({}),open:O.a.bool.isRequired},Le.defaultProps={basketList:[],anchorEl:null};var Be=function(e){return{nav:{overflow:"hidden"},logo:{flex:1,"text-transform":"none",fontWeight:900,fontSize:"1.5em",color:"#fff"},login:{margin:5},appBar:{background:"#110E0E",color:"#fff",overflow:"hidden"},text:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Pe(e,t,r[t])})}return e}({},e.typography.button,{color:"white"}),basket:{color:"white","@media (min-width: 641px)":{marginRight:"2rem"}},popUpMenu:{background:"#110E0E"},icon:{fontSize:"1.6rem"},badge:{top:"30%",right:-9,backgroundColor:"green"},menuSmall:{display:"flex",alignItems:"center",justifyContent:"center","@media (min-width: 601px)":{display:"none"}},menuLarge:{display:"none","@media (min-width: 601px)":{display:"flex",alignItems:"center",justifyContent:"center"}}}},De=function(e){var t=e.isAuthenticated,r=e.loginMenuOpen,n=e.userBarsCount,a=e.basketList,o=e.basketOpen,i=e.menuAnchorEl,s=e.basketAnchorEl,u=e.handleMenuOpen,p=e.handleMenuClose,f=e.handleLogOutClick,m=e.handleLogInClick,h=e.handleSignUpClick,S=e.handleBasketOpen,y=e.handleCloseBasketList,b=e.authenticatedUserName,E=Object(d.makeStyles)(Be)();return c.a.createElement(re.a,{className:E.appBar,id:"PageId"},c.a.createElement(ae.a,null,c.a.createElement(ie.a,{className:E.logo,component:l.Link,to:"/",type:"title"},"BarCoordinator"),c.a.createElement("div",{className:E.menuSmall},c.a.createElement(ce.a,{"aria-owns":r?"menu-appbar":null,"aria-haspopup":"true",onClick:u,color:"inherit"},c.a.createElement(le.a,null))),c.a.createElement("div",{className:E.menuLarge},t&&c.a.createElement(ce.a,{className:E.basket,"aria-label":"Show my places",title:"Show my places",onClick:S},c.a.createElement(be.a,{badgeContent:n,color:"primary",classes:{badge:E.badge}},c.a.createElement(fe.a,{className:E.icon}))),c.a.createElement("div",{className:E.text},"Hello, ".concat(b," !")),c.a.createElement("div",{className:E.login},t?c.a.createElement(R.a,{className:E.text,component:l.Link,to:"/logout",onClick:f},"LOG OUT"):c.a.createElement(c.a.Fragment,null,c.a.createElement(R.a,{className:E.text,onClick:m},"LOG IN"),c.a.createElement(R.a,{className:E.text,component:l.Link,to:"/signup",onClick:h},"SIGN UP")))),c.a.createElement(me.a,{id:"menu-appbar",classes:{paper:E.popUpMenu},anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:r,onClose:p},c.a.createElement(Oe.a,{className:E.text},b),t?[c.a.createElement(Se.a,{onClick:S,key:ee()()},c.a.createElement(Re.a,{className:E.text,"aria-label":"Show my places",title:"Show my places"},c.a.createElement(be.a,{badgeContent:n,color:"primary",classes:{badge:E.badge}},c.a.createElement(fe.a,null)))),c.a.createElement(Se.a,{className:E.text,component:l.Link,to:"/logout",onClick:f,key:ee()()},"LOG OUT")]:[c.a.createElement(Se.a,{className:E.text,onClick:m,key:ee()()},"LOG IN"),c.a.createElement(Se.a,{className:E.text,component:l.Link,to:"/signup",onClick:h,key:ee()()},"SIGN UP")]),c.a.createElement(je,{basketList:a,open:o,onClose:y,anchorEl:s})))},qe=De;De.propTypes={isAuthenticated:O.a.bool.isRequired,facebookProfile:O.a.shape({}),loginMenuOpen:O.a.bool.isRequired,basketOpen:O.a.bool.isRequired,userBarsCount:O.a.number.isRequired,basketList:O.a.arrayOf(O.a.shape({})).isRequired,showBasket:O.a.func.isRequired,menuAnchorEl:O.a.shape({}),basketAnchorEl:O.a.shape({}),handleMenuOpen:O.a.func.isRequired,handleMenuClose:O.a.func.isRequired,handleLogOutClick:O.a.func.isRequired,handleLogInClick:O.a.func.isRequired,handleSignUpClick:O.a.func.isRequired,handleCloseBasketList:O.a.func.isRequired,authenticatedUserName:O.a.string.isRequired},De.defaultProps={facebookProfile:{},menuAnchorEl:null,basketAnchorEl:null};r(29);var Ge=r(8);function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(){return(Me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function He(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $e=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return Ye(Ke(r=function(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?Ke(e):t}(this,(e=We(t)).call.apply(e,[this].concat(a)))),"state",{menuAnchorEl:null,basketAnchorEl:null}),Ye(Ke(r),"handleMenuOpen",function(e){var t=r.props.openLoginMenu;e.preventDefault(),r.setState({menuAnchorEl:e.currentTarget}),t()}),Ye(Ke(r),"handleMenuClose",function(){var e=r.props.closeLoginMenu;r.setState({menuAnchorEl:null}),e()}),Ye(Ke(r),"handleLogOutClick",function(e){var t=r.props.logOut;e.preventDefault(),r.handleMenuClose(),t()}),Ye(Ke(r),"handleLogInClick",function(e){var t=r.props.openLoginDialog;e.preventDefault(),r.handleMenuClose(),t()}),Ye(Ke(r),"handleSignUpClick",function(e){var t=r.props,n=t.location,a=t.history;e.preventDefault(),r.handleMenuClose(),"/signup"!==n.pathname&&a.push({pathname:"/signup"})}),Ye(Ke(r),"handleBasketOpen",function(e){var t=r.props.showBasket;e.preventDefault(),r.setState({basketAnchorEl:e.currentTarget}),t()}),Ye(Ke(r),"handleCloseBasketList",function(e){var t=r.props.closeBasket;e.preventDefault(),r.setState({basketAnchorEl:null}),t()}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(t,s["Component"]),function(e,t,r){t&&Ve(e.prototype,t),r&&Ve(e,r)}(t,[{key:"render",value:function(){var e=this.props,t=e.username,r=e.facebookProfile,n=He(e,["username","facebookProfile"]),a=this.state,o=a.menuAnchorEl,i=a.basketAnchorEl,s=null!=r&&null!=r.givenName?r.givenName:t||"Registered User";return c.a.createElement(qe,Me({menuAnchorEl:o,basketAnchorEl:i,handleMenuOpen:this.handleMenuOpen,handleMenuClose:this.handleMenuClose,handleLogOutClick:this.handleLogOutClick,handleLogInClick:this.handleLogInClick,handleSignUpClick:this.handleSignUpClick,handleBasketOpen:this.handleBasketOpen,handleCloseBasketList:this.handleCloseBasketList,authenticatedUserName:s,createMenuAnchor:this.createMenuAnchor},n))}}]),t}(),Ze=Object(Ge.compose)(l.withRouter,Object(f.connect)(function(e){var t=e.reducer;return{username:t.user.username,userBarsCount:t.user.bars&&t.user.bars.length||0,facebookProfile:t.user.facebookProfile,isAuthenticated:t.user.authenticated,loginMenuOpen:t.loginMenuOpen,basketOpen:t.basketDialogOpen,basketList:t.user.basket}},{logOut:function(){return function(e){return e({type:N.LOGOUT_USER}),C.axiosInstance.get("/logout").then(function(){e({type:N.LOGOUT_SUCCESS_USER})}).catch(function(){e({type:N.LOGOUT_ERROR_USER})})}},toSignUp:function(){return function(e){e(Object(T.push)("/signup"))}},openLoginDialog:U,openLoginMenu:function(){return{type:N.OPEN_LOGIN_MENU}},closeLoginMenu:function(){return{type:N.CLOSE_LOGIN_MENU}},closeBasket:function(){return{type:N.CLOSE_BASKET}},showBasket:function(){return function(e,t){return e({type:N.BEGIN_SHOW_BASKET}),C.axiosInstance.get("/currentUserBasket").then(function(){var r=V(regeneratorRuntime.mark(function r(n){var a,o,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=n.data.currentUserBars,o=t().reducer.map.service,i=[],r.next=5,a.reduce(function(e,t){return e.then(V(regeneratorRuntime.mark(function e(){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(o,t.placeId);case 2:r=e.sent,n={barId:t.barId,placeId:t.placeId,name:r.name,address:r.vicinity},i.push(n);case 5:case"end":return e.stop()}},e)})))},Promise.resolve());case 5:e(Z(i));case 6:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()).catch(function(){e(function(e){return{type:N.SHOW_BASKET_ERROR,message:e}}("Your request could not be completed"))})}}}))($e);$e.propTypes={location:O.a.shape({}).isRequired,history:O.a.shape({}).isRequired,isAuthenticated:O.a.bool.isRequired,username:O.a.string,facebookProfile:O.a.shape({givenName:O.a.string}),loginMenuOpen:O.a.bool.isRequired,basketOpen:O.a.bool.isRequired,userBarsCount:O.a.number.isRequired,basketList:O.a.arrayOf(O.a.shape({})).isRequired,showBasket:O.a.func.isRequired,closeBasket:O.a.func.isRequired,openLoginMenu:O.a.func.isRequired,closeLoginMenu:O.a.func.isRequired,logOut:O.a.func.isRequired,openLoginDialog:O.a.func.isRequired,toSignUp:O.a.func.isRequired},$e.defaultProps={facebookProfile:{givenName:null},username:""};r(103);var Qe={footerHeightSm:118,footerHeightLg:59,headerHeightSm:56,headerHeightLg:64},Xe={wrapper:{textAlign:"center",flexShrink:0,backgroundColor:"#110E0E",boxShadow:"0 -3px 7px -6px #222",height:"".concat(Qe.footerHeightSm,"px"),"@media (min-width: 320px)":{height:"".concat(Qe.footerHeightLg,"px")},"& *":{boxSizing:"content-box"}},element:{display:"inline-block",maxWidth:"160px",textAlign:"center"},container:{display:"inline-block",width:"auto",textAlign:"center"},icon:{transition:".4s",borderRadius:"50%",border:"1px solid",borderColor:"white",padding:"5px",margin:".5em",width:"24px",height:"24px",".can-hover &:hover ":{borderColor:"white",backgroundColor:"white",fill:"black"}},a:{fill:"white"},item:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:"130px",fontSize:".9em"},link:{margin:"5px auto 5px"}},Je=Object(m.makeStyles)(Xe);var et=function(){var e=Je();return c.a.createElement("footer",{className:e.wrapper},c.a.createElement("div",{className:e.container},c.a.createElement("div",{className:e.element},c.a.createElement("div",{className:e.link},c.a.createElement("div",null,c.a.createElement("a",{href:"https://github.com/ghajl/fcc-nightlife",target:"_blank",rel:"noopener noreferrer",className:e.a},c.a.createElement("div",{className:e.item},c.a.createElement("svg",{className:e.icon},c.a.createElement("path",{d:"M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z"}))))))),c.a.createElement("div",{className:e.element},c.a.createElement("div",{className:e.link},c.a.createElement("div",null,c.a.createElement("a",{href:"mailto:michaelmsky@gmail.com?subject=Mail from BC",target:"_blank",rel:"noopener noreferrer",className:e.a},c.a.createElement("div",{className:e.item},c.a.createElement("svg",{className:e.icon},c.a.createElement("path",{d:"M20,8L12,13L4,8V6L12,11L20,6M20,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6C22,4.89 21.1,4 20,4Z"})))))))))},tt={content:{flex:"1 1 auto",width:"100%",display:"flex","flex-direction":"column","@media (max-width: 640px)":{flexShrink:0}}},rt=function(e){var t=e.children,r=Object(m.makeStyles)(tt)();return c.a.createElement(s.Fragment,null,c.a.createElement(Ze,null),c.a.createElement("main",{className:r.content},t),c.a.createElement(et,null))},nt=rt;function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function it(e){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ut(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}rt.propTypes={classes:O.a.shape({}).isRequired,children:O.a.shape({}).isRequired};var lt=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ut(st(e=function(e,t){return!t||"object"!==at(t)&&"function"!=typeof t?st(e):t}(this,it(t).call(this))),"onSignupSubmit",function(t){t.preventDefault(),console.log(e.props),(0,e.props.handleSubmit)()}),ut(st(e),"handleKeyPress",function(t){"Enter"===t.key&&e.onSignupSubmit(t)}),e.usernameInput=null,e.passwordInput=null,e.state={usernameErrorMessage:"",passwordErrorMessage:""},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(t,s["Component"]),function(e,t,r){t&&ot(e.prototype,t),r&&ot(e,r)}(t,[{key:"render",value:function(){var e=this.props,t=e.classes,r=e.location,n=e.handleChange,a=e.handleSubmitSignUpForm,o=e.errors;console.log(this.props);var i=this.state;i.usernameErrorMessage,i.passwordErrorMessage;return c.a.createElement(nt,{location:r},c.a.createElement("div",{className:t.root},c.a.createElement("div",{className:t.container},c.a.createElement("form",{className:t.form,onSubmit:a},c.a.createElement(_.a,{className:t.textField,required:!0,error:o.username,id:"username",label:"Username",type:"username",helperText:o.username,onChange:n,margin:"normal"}),c.a.createElement(_.a,{className:t.textField,required:!0,error:o.password,id:"password",label:"Password",type:"password",helperText:o.password,onChange:n,margin:"normal"})),c.a.createElement("div",{className:t.button},c.a.createElement(R.a,{variant:"contained",onClick:a,type:"submit"},"sign up")),c.a.createElement("div",{className:t.fbLogin},c.a.createElement(X,null)))))}}]),t}(),pt=Object(d.withStyles)(function(e){return{root:{display:"flex",justifyContent:"center",alignItems:"center",flex:"1 0 auto",marginTop:"60px","@media (max-width: 600px)":{marginTop:"50px"}},container:{display:"flex",flexDirection:"column",alignItems:"center",width:500,maxWidth:"100%"},form:{display:"flex",flexDirection:"column",alignItems:"center",width:500,maxWidth:"100%"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:300,maxWidth:"100%"},menu:{width:200},button:{marginTop:50},fbLogin:{textAlign:"center",marginTop:50}}})(lt);lt.propTypes={signUp:O.a.func.isRequired,classes:O.a.shape({}).isRequired,location:O.a.shape({}).isRequired};var ft=r(87),dt=r(58),mt=(r(70),{mapPropsToValues:function(){return{username:"",password:""}},validationSchema:dt.object().shape({username:dt.string().required("Required field"),password:dt.string().required("Required field")}),handleSubmit:function(e,t){var r=t.props,n=t.setSubmitting;console.log(r);var a=e.username,o=e.password;r.submitData({username:a,password:o},r.history),n(!1)},validateOnChange:!1,validateOnBlur:!1});function ht(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function St(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var yt=Object(Ge.compose)(Object(f.connect)(null,{submitData:function(e,t){return z(e,t)}}),l.withRouter,Object(ft.withFormik)(mt),Object(Ge.mapProps)(function(e){var t=e.handleSubmit,r=(e.submitData,e.history,St(e,["handleSubmit","submitData","history"]));return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ht(e,t,r[t])})}return e}({handleSubmitForm:function(e){return function(t){console.log(e),t.preventDefault(),e()}}(t)},r)}),Object(Ge.withProps)(function(e){return{handleKeyPress:function(e){return function(t){"Enter"===t.key&&e(t)}}(e.handleSubmitForm)}}))(pt),bt=function(){return c.a.createElement(yt,null)},Et=r(86),Ot=r.n(Et),gt=r(50),Rt=r.n(gt),vt=r(39);r(69);function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function It(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wt(e,t){return(wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Tt=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return Nt(xt(r=function(e,t){return!t||"object"!==_t(t)&&"function"!=typeof t?xt(e):t}(this,(e=Ct(t)).call.apply(e,[this].concat(a)))),"state",{animation:null}),Nt(xt(r),"markerClick",function(){var e=r.props,t=e.barId;(0,e.markerClick)(t)}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wt(e,t)}(t,s["PureComponent"]),function(e,t,r){t&&It(e.prototype,t),r&&It(e,r)}(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,r=this.props.isHighlighted;e.isHighlighted&&!r&&this.setState({animation:google.maps.Animation.BOUNCE},function(){setTimeout(function(){return t.setState({animation:null})},1e3)})}},{key:"render",value:function(){var e=this.props,t=e.isHighlighted,r=e.lat,n=e.lng,a=this.state.animation,o=t?"https://maps.google.com/mapfiles/ms/icons/red-dot.png":"https://maps.google.com/mapfiles/ms/icons/blue-dot.png";return c.a.createElement(vt.Marker,{position:{lat:r,lng:n},onClick:this.markerClick,icon:o,animation:a})}}]),t}(),At=Tt;Tt.propTypes={lat:O.a.number.isRequired,lng:O.a.number.isRequired,barId:O.a.string.isRequired,isHighlighted:O.a.bool.isRequired,markerClick:O.a.func.isRequired};var Ut=Object(f.connect)(function(e,t){var r=e.reducer;return{isHighlighted:function(e,t){return e===t}(t.barId,r.bar.highlighted)}})(At);var kt=[{elementType:"geometry",stylers:[{color:"#1d2c4d"}]},{elementType:"labels.text.fill",stylers:[{color:"#8ec3b9"}]},{elementType:"labels.text.stroke",stylers:[{color:"#1a3646"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#64779e"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"landscape.man_made",elementType:"geometry.stroke",stylers:[{color:"#334e87"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#023e58"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#283d6a"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#6f9ba5"}]},{featureType:"poi",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#023e58"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#3C7680"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#304a7d"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#2c6675"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#255763"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#b0d5ce"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{color:"#023e58"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"transit",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{color:"#283d6a"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#3a4762"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#0e1626"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#4e6d70"}]}];function Lt(e){var t=e.lat,r=e.lng,n=e.markers,a=e.markerClick,o=e.setMapService,i=Object(s.useRef)(null);return Object(s.useEffect)(function(){var e=new google.maps.places.PlacesService(i.current.context.__SECRET_MAP_DO_NOT_USE_OR_YOU_WILL_BE_FIRED);o(e)},[]),c.a.createElement(vt.GoogleMap,{defaultZoom:13,defaultCenter:{lat:+t,lng:+r},center:{lat:+t,lng:+r},ref:i,defaultOptions:{styles:kt}},n?n.map(function(e){var t="number"==typeof e.location.lat?e.location.lat:e.location.lat(),r="number"==typeof e.location.lng?e.location.lng:e.location.lng(),n=e.id;return c.a.createElement(Ut,{key:n,lat:t,lng:r,barId:n,markerClick:a})}):c.a.createElement(vt.Marker,{position:{lat:+t,lng:+r}}))}var jt=Object(Ge.compose)(Object(Ge.withProps)({loadingElement:c.a.createElement("div",{style:{height:"100%"}}),containerElement:c.a.createElement("div",{style:{height:"inherit",width:"inherit"}}),mapElement:c.a.createElement("div",{style:{height:"100%",opacity:".8"}})}),Object(f.connect)(function(e){var t=e.reducer;return{lat:t.location.lat,lng:t.location.lng}},{setMapService:function(e){return{type:N.SET_MAP_SERVICE,service:e}}}),vt.withGoogleMap)(Lt);Lt.propTypes={lat:O.a.number.isRequired,lng:O.a.number.isRequired,markers:O.a.arrayOf(O.a.shape({})),markerClick:O.a.func.isRequired},Lt.defaultProps={markers:null};var Pt=r(85),Bt=r.n(Pt),Dt=r(84),qt=r.n(Dt),Gt=r(83),Ft=r.n(Gt),Mt=r(82),Ht=r.n(Mt),Vt={actions:{display:"flex",flexWrap:"wrap",alignItems:"center",paddingTop:"1rem","&>*":{margin:"0 1rem"}},card:{width:"100%",height:"100%",backgroundColor:"#193150",position:"relative",fontFamily:"Poiret One, cursive"},content:{padding:"1rem",fontSize:"30px",color:"white"},container:{position:"relative",minWidth:100,minHeight:100,background:"#333"},image:{objectFit:"contain",display:"none",maxWidth:"100%",padding:"3px",boxShadow:"10px 10px 3px #000",border:"1px solid #ddd",borderRadius:"3px"},progress:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}};function Wt(){return(Wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Kt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zt(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Yt=Object(d.makeStyles)(Vt);function $t(e){var t=e.style,r=e.className,n=e.children,a=e.src,o=zt(e,["style","className","children","src"]),i=Yt(),s=a?{backgroundImage:"url(".concat(a,")"),backgroundColor:"gray",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",paddingTop:"15rem"}:{};return c.a.createElement("div",Wt({className:"".concat(i.card," ").concat(r),style:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Kt(e,t,r[t])})}return e}({},s,t)},o),n)}var Zt=$t;function Qt(){return(Qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Xt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jt(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}$t.propTypes={className:O.a.string,children:O.a.node.isRequired,style:O.a.shape({}),src:O.a.string,id:O.a.string.isRequired},$t.defaultProps={className:"",src:"",style:{}};var er=Object(d.makeStyles)(Vt);function tr(e){var t=e.style,r=e.className,n=e.children,a=Jt(e,["style","className","children"]),o=er();return c.a.createElement("div",Qt({className:"".concat(o.content," ").concat(r),style:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Xt(e,t,r[t])})}return e}({},t)},a),n)}var rr=tr;tr.propTypes={className:O.a.string,children:O.a.node.isRequired,style:O.a.shape({})},tr.defaultProps={className:"",style:{}};r(46);function nr(){return(nr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ar(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function or(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ir(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var sr=Object(d.makeStyles)(Vt);function cr(e){var t=e.style,r=e.className,n=e.src,a=e.alt,o=ir(e,["style","className","src","alt"]),i=sr(),u=or(Object(s.useState)(!0),2),l=u[0],p=u[1],f=l?{}:{minWidth:0,minHeight:0},d=l?{}:{display:"block"};return c.a.createElement("div",{className:i.container,style:f},c.a.createElement("img",nr({className:"".concat(i.image," ").concat(r),style:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ar(e,t,r[t])})}return e}({},t,d),src:n,alt:a,onLoad:function(){p(!1)}},o)),!!l&&c.a.createElement("div",{className:i.progress},c.a.createElement(Rt.a,{size:30})))}var ur=cr;function lr(){return(lr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function pr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fr(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}cr.propTypes={src:O.a.string.isRequired,alt:O.a.string,className:O.a.string,classes:O.a.shape({}),style:O.a.shape({})},cr.defaultProps={className:"",classes:{},style:{},alt:"Bar's image"};var dr=Object(d.makeStyles)(Vt);function mr(e){var t=e.style,r=e.className,n=e.children,a=fr(e,["style","className","children"]),o=dr();return c.a.createElement("div",lr({className:"".concat(o.actions," ").concat(r),style:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){pr(e,t,r[t])})}return e}({},t)},a),n)}var hr=mr;mr.propTypes={className:O.a.string,children:O.a.node.isRequired,style:O.a.shape({})},mr.defaultProps={className:"",style:{}};r(102);function Sr(){return(Sr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function yr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function br(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Er=Object(d.makeStyles)({star:{display:"inline-block",width:function(e){return"".concat(e.width,"px")},height:function(e){return"".concat(e.width,"px")}}}),Or=function(e,t,r,n,a){var o=e.getContext("2d");o.scale(a,a);var i=t,s=t/2.3,c=t,u=t,l=Math.PI/2*3,p=t,f=t,d=Math.PI/5,m=t/3.5,h=1.5*m,S=h+(2*t-2*h)*n;o.fillStyle=r,o.fillRect(0,0,S,60),o.beginPath(),o.moveTo(c,u-i);for(var y=0;y<5;y++)p=c+Math.cos(l)*i,f=u+Math.sin(l)*i,o.lineTo(p,f),l+=d,p=c+Math.cos(l)*s,f=u+Math.sin(l)*s,o.lineTo(p,f),l+=d;o.lineTo(c,u-i),o.closePath(),o.lineWidth=m,o.strokeStyle=r,o.stroke(),o.globalCompositeOperation="source-in",o.fillStyle=r,o.fill()};function gr(e){var t=e.className,r=e.style,n=e.color,a=e.percent,o=e.width,i=br(e,["className","style","color","percent","width"]),u=Er({width:o}),l=Object(s.useRef)(null);return Object(s.useEffect)(function(){var e,t=(null===(e=window)||void 0===e?void 0:e.devicePixelRatio)||1,r=o/2;l.current.width=o*t,l.current.height=o*t,Or(l.current,r,n,a,t)},[]),c.a.createElement("canvas",Sr({className:"".concat(u.star," ").concat(t),ref:l,style:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){yr(e,t,r[t])})}return e}({},r)},i),"Star")}var Rr=gr;gr.propTypes={className:O.a.string,style:O.a.shape({}),width:O.a.string,color:O.a.string,percent:O.a.oneOfType([O.a.number,O.a.string])},gr.defaultProps={className:"",style:{},width:"10",color:"#000",percent:1};var vr=function(e){for(var t=e.rating,r=[],n=0;n<Math.floor(t);n++){var a=ee()();r.push(c.a.createElement(Rr,{key:a,width:"20",color:"#ffd10e",percent:"1"}))}var o=t%1;if(o>0){var i=ee()();r.push(c.a.createElement(Rr,{key:i,width:"20",color:"#ffd10e",percent:o}))}return r},_r={wrapper:{display:"inline-block",width:"100%"},name:{fontSize:"2.4rem",lineHeight:"1",marginBottom:".2rem",color:"#7FC4F3"},address:{fontSize:"1.2rem"},rating:{},action:{textAlign:"center"},visitorsWrapper:{fontSize:"1.2rem",display:"flex",alignItems:"center"},visitors:{display:"inline-block",lineHeight:"1"},imageWrapper:{maxHeight:"200px",display:"flex",justifyContent:"center",margin:"1rem 0 3rem 0"},centerVertical:{position:"absolute",top:"50%",transform:"translate(0, -50%)"},icon:{color:"white",fontSize:36,width:36,height:36},remove:{color:"#FF3535"},add:{color:"#93DB18"},button:{},mapVisible:{display:"none","@media (min-width: 641px)":{display:"block"}}},Ir=Object(d.makeStyles)(_r);function Cr(e){var t=e.isBarInBasket,r=e.countWithoutUser,n=Ir(),a=r<=0?c.a.createElement("span",{className:n.visitorsCountWrapper},c.a.createElement("span",{className:n.you},"Me")):c.a.createElement("span",{className:n.visitorsCountWrapper},c.a.createElement("span",{className:n.you},"Me and"),c.a.createElement("span",{className:n.visitorsCount}," ".concat(r))),o=c.a.createElement("span",{className:n.visitorsCount},r<=0?"-":r);return c.a.createElement("div",{className:n.visitorsWrapper},c.a.createElement("span",{className:n.visitors},"Going: ",t?a:o))}var xr=Cr;Cr.propTypes={isBarInBasket:O.a.bool.isRequired,countWithoutUser:O.a.number.isRequired};var wr=Object(d.makeStyles)(_r);function Nr(e){var t=e.highlightPlace,r=e.loginAndAdd,n=e.showVisitorsList,a=e.addBar,o=e.createCardRef,i=e.barId,u=e.img,l=e.name,p=e.address,f=e.rating,d=e.authenticated,m=e.isBarInBasket,h=e.countWithoutUser,S=e.shouldShowVisitorsList,y=e.history,b=Object(s.useRef)(null);Object(s.useEffect)(function(){o(i,b.current)});var E=wr();return c.a.createElement("div",{ref:b,className:E.wrapper},c.a.createElement(Zt,{id:i},c.a.createElement(rr,null,u&&c.a.createElement("div",{className:E.imageWrapper},c.a.createElement(ur,{src:u})),c.a.createElement("div",null,c.a.createElement("span",{className:E.name},l)),c.a.createElement("span",{className:E.address},p),f&&c.a.createElement("div",{className:E.rating},c.a.createElement(vr,{rating:f})),c.a.createElement(xr,{isBarInBasket:m,countWithoutUser:h}),c.a.createElement(hr,null,m?c.a.createElement(Bt.a,{className:"".concat(E.icon," ").concat(E.add)}):c.a.createElement(ce.a,{className:E.button,"aria-label":"Add to list",title:"Add to list",onClick:d?function(e){e.preventDefault(),e.stopPropagation(),a(i,y)}:function(e){e.preventDefault(),e.stopPropagation(),r(i)}},c.a.createElement(qt.a,{className:"".concat(E.icon," ").concat(E.add)})),S&&c.a.createElement(ce.a,{className:E.button,"aria-label":"Show list",title:"Show list",onClick:function(e){e.preventDefault(),e.stopPropagation(),n(i)}},c.a.createElement(Ft.a,{className:E.icon})),c.a.createElement(ce.a,{className:"".concat(E.button," ").concat(E.mapVisible),"aria-label":"Show on map",title:"Show on map",onClick:function(){t(i)}},c.a.createElement(Ht.a,{className:E.icon}))))))}var Tr=Object(l.withRouter)(Nr);Nr.propTypes={showVisitorsList:O.a.func.isRequired,createCardRef:O.a.func.isRequired,barId:O.a.string.isRequired,img:O.a.string,name:O.a.string.isRequired,address:O.a.string.isRequired,rating:O.a.number,isBarInBasket:O.a.bool.isRequired,highlightPlace:O.a.func.isRequired,addBar:O.a.func.isRequired,authenticated:O.a.bool.isRequired,loginAndAdd:O.a.func.isRequired,countWithoutUser:O.a.number,shouldShowVisitorsList:O.a.bool,history:O.a.shape({}).isRequired},Nr.defaultProps={img:null,rating:0,countWithoutUser:0,shouldShowVisitorsList:!1};var Ar=r(81),Ur=function(e){return e.reducer.user.bars},kr=function(e,t){return t.barId},Lr=function(){return Object(Ar.createSelector)([Ur,kr],function(e,t){return e&&-1!==e.indexOf(t)})},jr=Object(Ge.compose)(Object(f.connect)(function(){var e=Lr();return function(t,r){return{isBarInBasket:e(t,r),authenticated:t.reducer.user.authenticated,username:t.reducer.user.username}}},{addBar:G,removeBar:F,loginAndAdd:function(e){return function(t){t(function(e){return{type:N.SAVE_GUEST_BAR,barId:e}}(e)),t({type:N.OPEN_LOGIN_DIALOG})}},openLoginDialog:U,showVisitorsList:q,highlightPlace:M}),Object(Ge.withProps)(function(e){var t=e.isBarInBasket?e.visitorsCount-1:e.visitorsCount;return{countWithoutUser:t,shouldShowVisitorsList:e.authenticated&&(e.isBarInBasket&&t>1||t>0)}}))(Tr),Pr=r(32),Br=r.n(Pr),Dr=r(80),qr=r.n(Dr),Gr=function(e){return{text:e.typography.button,searchBar:{width:"100%",height:"90px",minHeight:"90px",backgroundColor:"#FFD54F",position:"relative",display:"flex",alignItems:"center",'& input[type="text"]':{border:"none",fontFamily:"Alegreya Sans, sans-serif"}},form:{width:"80%",padding:"16px"},icon:{fontSize:36,width:36,height:36},autocomplete:{},extra:{opacity:0,position:"absolute",top:0,left:0,height:0,width:0,padding:0,zIndex:-999}}};function Fr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Hr(e){var t=e.currentLocation,r=e.style,n=e.className,a=e.searchBarRef,o=e.history,i=Mr(Object(s.useState)(t),2),u=i[0],l=i[1];Object(s.useEffect)(function(){l(t)},[t]);var p=Mr(Object(s.useState)(""),2),f=p[0],m=p[1],h=function(){o.push("/places?loc=".concat(u,"&bar=show"))},S=Object(d.makeStyles)(Gr)(),y={value:u,onChange:function(e){return l(e)}};return c.a.createElement("div",{className:"".concat(S.searchBar," ").concat(n),style:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Fr(e,t,r[t])})}return e}({},r),ref:a},c.a.createElement("div",{className:S.form},c.a.createElement(Br.a,{inputProps:y,styles:{autocompleteContainer:{zIndex:1e3,fontFamily:"Alegreya Sans, sans-serif"}},onSelect:function(e){f||(l(e),h())},className:S.autocomplete}),c.a.createElement("input",{className:S.extra,autoComplete:"off",type:"text",id:"extra",name:"extra",placeholder:"Your extra here",value:f,onChange:function(e){e.preventDefault(),m(e.target.value)}})),c.a.createElement(ce.a,{className:S.button,"aria-label":"Show bars",title:"Show bars",onClick:function(e){e.preventDefault(),f||h()}},c.a.createElement(qr.a,{className:S.icon})))}var Vr=Object(l.withRouter)(Hr);Hr.propTypes={className:O.a.string,style:O.a.shape({}),searchBarRef:O.a.shape({}),currentLocation:O.a.string,history:O.a.shape({push:O.a.func.isRequired}).isRequired},Hr.defaultProps={className:"",style:{},searchBarRef:null,currentLocation:""};r(101);var Wr={wrapper:{flex:"1 0 auto",display:"flex",position:"relative","@media (max-width: 640px)":{flexDirection:"column"},marginTop:"60px","@media (max-width: 600px)":{marginTop:"50px"}},listWrapper:{display:"flex",flexDirection:"column",width:"100%",position:"relative",backgroundColor:"#193150","@media (min-width: 641px)":{maxWidth:"400px",width:"50%","overflow-y":"scroll",height:"calc(100vh - ".concat(parseInt(Qe.footerHeightLg,10),"px - ").concat(parseInt(Qe.headerHeightLg,10),"px)")},"@media (max-width: 640px)":{flex:"1 0 auto"}},item:{margin:"20px"},map:{flexGrow:1,height:"calc(100vh - ".concat(parseInt(Qe.footerHeightLg,10),"px - ").concat(parseInt(Qe.headerHeightLg,10),"px)"),"@media (max-width: 640px)":{width:0,height:0}},upButtonWrapper:{bottom:"10%",right:"10%",zIndex:1e3,opacity:.7,transition:".6s",position:"relative",width:0,height:0,"@media (min-width: 641px)":{width:"52px",height:"52px",position:"absolute"}},upButton:{width:"50px",height:"50px",position:"fixed",borderRadius:"50%",backgroundColor:"black",cursor:"pointer",boxShadow:"1px 1px 6px rgba(0, 0, 0, .5)","@media (max-width: 640px)":{bottom:"10%",right:"10%"}},icon:{fill:"white",width:"36px",height:"36px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},progress:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:2e3}};function Kr(e){var t=e.bars,r=e.upButtonVisible,n=e.setScrollEvent,a=e.searchBarRef,o=e.currentLocation,i=e.createCardRef,s=e.scroll,u=e.markerClick,l=e.loading,p=Object(m.makeStyles)(Wr)(),f=r?{visibility:"visible"}:{visibility:"hidden",opacity:0};return c.a.createElement("div",{className:p.wrapper},c.a.createElement("div",{className:p.listWrapper,id:"ListId",ref:n},c.a.createElement(Vr,{currentLocation:o,searchBarRef:a}),!!t&&t.map(function(e,t){return c.a.createElement("div",{key:e.id},t>0&&c.a.createElement(xe,null),c.a.createElement(jr,{createCardRef:i,barId:e.id,placeId:e.placeId,img:e.img,name:e.name,address:e.address,rating:e.rating,visitorsCount:e.visitorsCount}))}),c.a.createElement("div",{className:p.upButtonWrapper,style:f},c.a.createElement("div",{className:p.upButton,onClick:s},c.a.createElement(Ot.a,{className:p.icon})))),c.a.createElement("div",{className:p.map},c.a.createElement(jt,{isMarkerShown:!0,markers:t,markerClick:u})),!!l&&c.a.createElement("div",{className:p.progress},c.a.createElement(Rt.a,{size:160})))}var zr=Kr;Kr.propTypes={bars:O.a.arrayOf(O.a.shape({})),upButtonVisible:O.a.bool.isRequired,loading:O.a.bool.isRequired,setScrollEvent:O.a.func.isRequired,searchBarRef:O.a.shape({}).isRequired,createCardRef:O.a.func.isRequired,scroll:O.a.func.isRequired,markerClick:O.a.func.isRequired},Kr.defaultProps={bars:null,currentLocation:""};r(60),r(100),r(59);var Yr=r(38),$r=r.n(Yr),Zr=r(65),Qr={address:"San Francisco, CA",lat:37.774,lng:-122.4194};function Xr(e){return{type:N.FIND_BARS_ERROR,message:e}}function Jr(e){return{type:N.SAVE_PATH,path:e}}function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rn(e){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function an(e,t){return(an=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function on(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var sn=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),on(nn(r=function(e,t){return!t||"object"!==en(t)&&"function"!=typeof t?nn(e):t}(this,rn(t).call(this,e))),"setScrollEvent",function(e){e&&e.addEventListener("scroll",r.handleScroll)}),on(nn(r),"markerClick",function(e){var t=r.props.highlightPlace;if(r.barCards[e]&&r.searchBarRef){var n=r.searchBarRef.current.getBoundingClientRect().top,a=r.barCards[e].getBoundingClientRect().top-n;r.scrollTo(a)}t(e)}),on(nn(r),"createCardRef",function(e,t){r.barCards[e]=t}),on(nn(r),"showList",function(e){(0,r.props.showVisitorsList)(e)}),on(nn(r),"scrollTo",function(e){Zr.animateScroll.scrollTo(e,{duration:800,delay:0,smooth:"easeInOutQuart",containerId:"ListId"})}),on(nn(r),"scrollToTop",function(e){var t;t=e<=640?"PageId":"ListId",Zr.animateScroll.scrollToTop({containerId:t})}),on(nn(r),"handleScroll",function(){if(r.searchBarRef){var e=r.state.upButtonVisible,t=r.searchBarRef.current.getBoundingClientRect().top;e?t>=-20&&r.setState({upButtonVisible:!1}):t<-20&&r.setState({upButtonVisible:!0})}});var n=e.location,a=(e.replaceLocation,e.history);return r.urlQuery=$r.a.parse(n.search),console.log(a),r.urlQuery.loc||a.replace("/places?loc=".concat(Qr.address,"&bar=show")),r.barCards={},r.searchBarRef=c.a.createRef(),r.state={upButtonVisible:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&an(e,t)}(t,s["Component"]),function(e,t,r){t&&tn(e.prototype,t),r&&tn(e,r)}(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll);var e=this.props,t=e.location,r=e.showBars,n=e.mapService;this.urlQuery=$r.a.parse(t.search),this.urlQuery.bar&&this.urlQuery.loc&&n&&r(this.urlQuery.loc)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.location,n=t.showBars,a=(t.replaceLocation,t.mapService),o=t.history;(null!=r.search&&r.search!==e.location.search||!e.mapService&&a)&&(this.urlQuery=$r.a.parse(r.search),this.urlQuery.loc&&a?n(this.urlQuery.loc):o.replace("/places?loc=".concat(Qr.address,"&bar=show")))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this,t=this.props,r=t.bars,n=t.loading,a=this.state.upButtonVisible,o=("undefined"!=typeof window?window:{innerWidth:1800}).innerWidth;return c.a.createElement(zr,{upButtonVisible:a,bars:r,currentLocation:this.urlQuery.loc,scroll:function(){return e.scrollToTop(o)},markerClick:this.markerClick,setScrollEvent:this.setScrollEvent,searchBarRef:this.searchBarRef,loading:n,createCardRef:this.createCardRef})}}]),t}(),cn=Object(Ge.compose)(l.withRouter,Object(f.connect)(function(e){return{bars:e.reducer.location.bars,lat:e.reducer.location.lat,lng:e.reducer.location.lng,loading:e.reducer.user.isWaiting,mapService:e.reducer.map.service}},{findLocation:function(e){return function(t){return t({type:N.FIND_LOCATION}),Object(Pr.geocodeByAddress)(e).then(function(e){return Object(Pr.getLatLng)(e[0])}).then(function(r){var n=r.lat,a=r.lng;t(function(e,t,r){return{type:N.FIND_LOCATION_SUCCESS,address:e,lat:t,lng:r}}(e,n,a))}).catch(function(){t(function(e){return{type:N.FIND_LOCATION_ERROR,message:e}}("Your request could not be completed, something wrong with the address"))})}},showBars:function(e){return function(t,r){return t({type:N.FIND_BARS}),Object(Pr.geocodeByAddress)(e).then(function(e){return Object(Pr.getLatLng)(e[0])}).then(function(n){var a=n.lat,o=n.lng,i={location:new google.maps.LatLng(a,o),radius:"3000",type:["bar"]};r().reducer.map.service.nearbySearch(i,function(r,n){return n===google.maps.places.PlacesServiceStatus.OK?C.axiosInstance.get("/currentUserPlacesData",{params:{bars:r.map(function(e){return e.id})}}).then(function(n){var i=r.map(function(e){var t=e.photos&&e.photos[0]&&e.photos[0].getUrl&&e.photos[0].getUrl instanceof Function&&e.photos[0].getUrl({maxWidth:200,maxHeight:200});return{id:e.id,placeId:e.place_id,name:e.name,img:t,rating:e.rating,location:e.geometry.location,address:e.vicinity,visitorsCount:0,highlighted:!1}});n.data.visitors.forEach(function(e){var t=i.findIndex(function(t){return t.id===e.barId});i[t].visitorsCount=e.count});var s=n.data,c=s.username,u=void 0===c?null:c,l=s.profile,p=void 0===l?null:l,f=s.userId,d=void 0===f?null:f;t(function(e,t,r,n,a,o,i,s){return{type:N.FIND_BARS_SUCCESS,bars:e,address:t,lat:r,lng:n,userBars:a,username:o,profile:i,userId:s}}(i,e,a,o,n.data.currentUserBars,u,p,d))}).catch(function(){t(Xr("Unable to show results"))}):n===google.maps.places.PlacesServiceStatus.ZERO_RESULTS?t(function(e){return{type:N.ZERO_RESULTS_SEARCH_ERROR,message:e}}("Sorry, no matches were found")):void t(Xr("Unable to show results"))})}).catch(function(){t(Xr("Unable to show results"))})}},showVisitorsList:q,highlightPlace:M,replaceLocation:function(e){}}))(sn);sn.propTypes={location:O.a.shape({search:O.a.string.isRequired,pathname:O.a.string.isRequired}).isRequired,loading:O.a.bool,bars:O.a.arrayOf(O.a.shape({})),replaceLocation:O.a.func.isRequired,showBars:O.a.func.isRequired,highlightPlace:O.a.func.isRequired,showVisitorsList:O.a.func.isRequired},sn.defaultProps={bars:null,loading:!1};var un=function(){return c.a.createElement(nt,{id:"PageId"},c.a.createElement(cn,null))},ln=function(e){var t=e.authenticated;return console.log(t),t?c.a.createElement(un,null):c.a.createElement(bt,null)},pn=Object(f.connect)(function(e){return{authenticated:e.reducer.user.authenticated}})(ln);function fn(e){var t=e.location,r=e.dispatch,n=e.returnPath,a=$r.a.parse(t.search);return void 0!==a.addOperation&&(r({type:N.FACEBOOK_LOGIN_SUCCESS,message:"You have been successfully logged in!"}),a.addOperation&&(a.addOperationSuccess?r({type:N.FACEBOOK_LOGIN_ADD_SUCCESS,message:"You have successfully added to the list!"}):r({type:N.FACEBOOK_LOGIN_ADD_ERROR,message:"Your request could not be completed"}))),c.a.createElement(l.Redirect,{to:n})}ln.propTypes={authenticated:O.a.bool.isRequired};var dn=Object(Ge.compose)(l.withRouter,Object(f.connect)(function(e){return{returnPath:e.reducer.returnPath}}))(fn);fn.propTypes={location:O.a.shape({search:O.a.string}),dispatch:O.a.func.isRequired,returnPath:O.a.string},fn.defaultProps={location:{search:""},returnPath:""};var mn=r(37),hn=r.n(mn),Sn=r(36),yn=r.n(Sn),bn=r(49),En=r.n(bn),On=r(48),gn=r.n(On);function Rn(e){return(Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _n(e){return(_n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function In(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cn(e,t){return(Cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wn=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xn(In(e=function(e,t){return!t||"object"!==Rn(t)&&"function"!=typeof t?In(e):t}(this,_n(t).call(this))),"handleClickOpen",function(){(0,e.props.dispatch)(U())}),xn(In(e),"handleSubmitLogin",function(t){var r=t&&t.username||"",n=t&&t.password||"",a=e.props,o=a.dispatch,i=a.history,s=I(r,n),c=s.usernameError,u=s.passwordError;c||u?e.setState({usernameErrorText:c,passwordErrorText:u}):(e.setState({usernameErrorText:"",passwordErrorText:""}),o(K({username:r,password:n},i)))}),xn(In(e),"goToSignUp",function(){var t=e.props,r=t.dispatch,n=t.history;r(k()),n.push({pathname:"/signup"})}),xn(In(e),"handleCloseLogin",function(){var t=e.props.dispatch;e.setState({usernameErrorText:"",passwordErrorText:""}),t(k())}),xn(In(e),"handleKeyPress",function(t){"Enter"===t.key&&e.submit(t)}),xn(In(e),"submit",function(t){t.preventDefault();var r={username:e.usernameInput.value,password:e.passwordInput.value};e.handleSubmitLogin(r)}),e.usernameInput=null,e.passwordInput=null,e.state={usernameErrorText:"",passwordErrorText:""},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cn(e,t)}(t,s["Component"]),function(e,t,r){t&&vn(e.prototype,t),r&&vn(e,r)}(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.classes,n=t.open,a=this.state,o=a.usernameErrorText,i=a.passwordErrorText;return c.a.createElement("div",null,c.a.createElement(hn.a,{open:n,onClose:this.handleCloseLogin},c.a.createElement(gn.a,{id:"form-dialog-title"},"Log in"),c.a.createElement(En.a,null,c.a.createElement("form",null,c.a.createElement(_.a,{required:!0,error:o.length>0,margin:"normal",id:"username",label:"Username",type:"username",helperText:o,inputRef:function(t){t&&(e.usernameInput=t,setTimeout(function(){e.usernameInput.focus()},300))},fullWidth:!0,onKeyPress:this.handleKeyPress}),c.a.createElement(_.a,{required:!0,error:i.length>0,margin:"normal",id:"password",label:"Password",type:"password",helperText:i,inputRef:function(t){e.passwordInput=t},fullWidth:!0,onKeyPress:this.handleKeyPress}))),c.a.createElement(yn.a,null,c.a.createElement(R.a,{onClick:this.submit,color:"primary"},"Log in"),c.a.createElement(R.a,{onClick:function(){return e.goToSignUp()},color:"primary"},"Or, sign up"),c.a.createElement(R.a,{onClick:this.handleCloseLogin,color:"primary"},"Cancel")),c.a.createElement("div",{className:r.fbLogin},c.a.createElement(X,null))))}}]),t}(),Nn=Object(Ge.compose)(l.withRouter,Object(f.connect)(function(e){return{open:e.reducer.loginDialogOpen}}),Object(d.withStyles)({fbLogin:{backgroundColor:"#F8F8F8",textAlign:"center"}}))(wn);wn.propTypes={classes:O.a.shape({fbLogin:O.a.string.isRequired}).isRequired,open:O.a.bool.isRequired,dispatch:O.a.func.isRequired,history:O.a.shape({}).isRequired};var Tn=r(79),An=r.n(Tn),Un=function(e){var t=e.classes,r=e.open,n=e.message,a=e.dispatch,o=function(){a({type:N.CLOSE_MESSAGE_DIALOG})};return c.a.createElement(hn.a,{open:r,onClose:o},c.a.createElement(En.a,null,n&&n.map(function(e){var t=ee()();return c.a.createElement(An.a,{key:t},e)})),c.a.createElement(yn.a,{className:t.button},c.a.createElement(R.a,{raised:!0,onClick:o,color:"primary"},"Ok")))},kn=Object(f.connect)(function(e){var t=e.reducer;return{message:t.user.message,open:t.messageDialogOpen}})(Object(d.withStyles)({button:{alignSelf:"center"}})(Un));Un.propTypes={classes:O.a.shape({button:O.a.string.isRequired}).isRequired,open:O.a.bool.isRequired,message:O.a.arrayOf(O.a.string).isRequired};var Ln=r(78),jn=r.n(Ln);function Pn(){return(Pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Bn(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Dn=function(e){var t=e.visitorsList,r=e.open,n=e.dispatch,a=Bn(e,["visitorsList","open","dispatch"]),o=function(){n({type:N.CLOSE_VISITORS_LIST})};return c.a.createElement(hn.a,Pn({open:r,onClose:o},a),c.a.createElement(gn.a,{id:"going-list"},"Who is going:"),c.a.createElement("div",null,c.a.createElement(_e.a,null,t.map(function(e){return c.a.createElement(Oe.a,{key:e},c.a.createElement(jn.a,{primary:e}))}))),c.a.createElement(yn.a,null,c.a.createElement(R.a,{onClick:o,color:"primary"},"Ok")))},qn=Object(f.connect)(function(e){var t=e.reducer;return{visitorsList:t.bar.visitors,open:t.listDialogOpen}})(Dn);function Gn(e){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mn(e){return(Mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vn(e,t){return(Vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Dn.propTypes={visitorsList:O.a.arrayOf(O.a.string),dispatch:O.a.func.isRequired,open:O.a.bool.isRequired},Dn.defaultProps={visitorsList:[]};var Kn=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Wn(Hn(r=function(e,t){return!t||"object"!==Gn(t)&&"function"!=typeof t?Hn(e):t}(this,Mn(t).call(this,e))),"componentDidMount",function(){var e=r.props,t=e.dispatch,n=e.history;r.unlisten=n.listen(function(e){for(var n=e.pathname,a=e.search,o=0;o<r.approvedReturnPath.length;o++)if(n==="/".concat(r.approvedReturnPath[o])){t(Jr("".concat(n).concat(a)));break}}),!matchMedia("(hover: none)").matches&&document.body.classList.add("can-hover")}),Wn(Hn(r),"componentWillUnmount",function(){r.unlisten()}),r.approvedReturnPath=["places"];for(var n=e.dispatch,a=e.history.location,o=a.pathname,i=a.search,s=0;s<r.approvedReturnPath.length;s++)if(o==="/".concat(r.approvedReturnPath[s])){n(Jr("".concat(o).concat(i)));break}return r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vn(e,t)}(t,s["Component"]),function(e,t,r){t&&Fn(e.prototype,t),r&&Fn(e,r)}(t,[{key:"render",value:function(){var e=this.props.route;return c.a.createElement(s.Fragment,null,c.a.createElement(l.Switch,null,Object(p.renderRoutes)(e.routes)),c.a.createElement(Nn,null),c.a.createElement(kn,null),c.a.createElement(qn,null))}}]),t}(),zn=Object(l.withRouter)(Object(f.connect)(function(e){return{userId:e.reducer.user.userId}})(Kn));Kn.propTypes={dispatch:O.a.func.isRequired,history:O.a.shape({location:O.a.shape({pathname:O.a.string.isRequired,search:O.a.string.isRequired}).isRequired,listen:O.a.func.isRequired}).isRequired,route:O.a.shape({routes:O.a.array.isRequired}).isRequired};var Yn=[{component:zn,routes:[{path:"/places",component:un,exact:!0},{path:"/signup",component:pn,exact:!0},{path:"/return-from-success-login",component:dn,exact:!0},{component:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,"Page Not Found"))}}]}],$n=r(11),Zn=r(77),Qn=r.n(Zn),Xn=r(76),Jn=r.n(Xn),ea=Object($n.combineReducers)({visitors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.SHOW_VISITORS_LIST_SUCCESS:return t.visitors;case N.CLOSE_VISITORS_LIST:return[];default:return e}},highlighted:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.HIGHLIGHT_PLACE:return t.barId;case N.LOGOUT_SUCCESS_USER:case N.FETCH_USER_ERROR:return null;default:return e}}});r(68),r(99);function ta(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ra(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){na(e,t,r[t])})}return e}function na(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var aa=Object($n.combineReducers)({bars:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.FIND_LOCATION_SUCCESS:case N.ZERO_RESULTS_SEARCH_ERROR:return[];case N.FIND_BARS_SUCCESS:return t.bars;case N.INCREMENT_VISITORS_COUNT:var r=e.findIndex(function(e){return e.id===t.barId}),n=ra({},e[r],{visitorsCount:e[r].visitorsCount+1});return[].concat(ta(e.slice(0,r)),[n],ta(e.slice(r+1)));case N.DECREMENT_VISITORS_COUNT:var a=e.findIndex(function(e){return e.id===t.barId});if(a>=0){var o=ra({},e[a],{visitorsCount:e[a].visitorsCount-1});return[].concat(ta(e.slice(0,a)),[o],ta(e.slice(a+1)))}return e;default:return e}},address:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr.address,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.FIND_LOCATION_SUCCESS:case N.FIND_BARS_SUCCESS:return t.address;default:return e}},lat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr.lat,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.FIND_LOCATION_SUCCESS:case N.FIND_BARS_SUCCESS:return t.lat;default:return e}},lng:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr.lng,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.FIND_LOCATION_SUCCESS:case N.FIND_BARS_SUCCESS:return t.lng;default:return e}}});r(98);function oa(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ia=Object($n.combineReducers)({isWaiting:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case N.BEGIN_ADD_BAR:case N.BEGIN_REMOVE_BAR:case N.FIND_LOCATION:case N.FIND_BARS:case N.LOGOUT_USER:case N.SIGNUP_USER:case N.FETCH_USER:case N.MANUAL_LOGIN_USER:case N.BEGIN_SHOW_VISITORS_LIST:case N.START_FACEBOOK_LOGIN:case N.BEGIN_SHOW_BASKET:return!0;case N.LOGIN_SUCCESS_USER:case N.SIGNUP_SUCCESS_USER:case N.SIGNUP_ERROR_USER:case N.LOGIN_ERROR_USER:case N.LOGOUT_ERROR_USER:case N.LOGOUT_SUCCESS_USER:case N.SESSION_EXPIRED:case N.FETCH_USER_SUCCESS:case N.FETCH_USER_ERROR:case N.FIND_LOCATION_SUCCESS:case N.FIND_BARS_SUCCESS:case N.ADD_BAR_ERROR:case N.REMOVE_BAR_ERROR:case N.FIND_LOCATION_ERROR:case N.FIND_BARS_ERROR:case N.SHOW_VISITORS_LIST_SUCCESS:case N.SHOW_VISITORS_LIST_ERROR:case N.END_FACEBOOK_LOGIN:case N.ADD_BAR_SUCCESS:case N.REMOVE_BAR_SUCCESS:case N.SHOW_BASKET_SUCCESS:case N.SHOW_BASKET_ERROR:case N.ZERO_RESULTS_SEARCH_ERROR:return!1;default:return e}},authenticated:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.FETCH_USER_SUCCESS:case N.LOGIN_SUCCESS_USER:case N.SIGNUP_SUCCESS_USER:case N.LOGOUT_ERROR_USER:case N.SET_USER_DATA:return!0;case N.FETCH_USER_ERROR:case N.SIGNUP_ERROR_USER:case N.LOGIN_ERROR_USER:case N.LOGOUT_SUCCESS_USER:case N.SESSION_EXPIRED:return!1;case N.FIND_BARS_SUCCESS:return null!=t.userId;default:return e}},userId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.FETCH_USER_SUCCESS:case N.LOGIN_SUCCESS_USER:case N.SIGNUP_SUCCESS_USER:case N.SET_USER_DATA:return t.userId;case N.LOGOUT_SUCCESS_USER:case N.SESSION_EXPIRED:case N.FETCH_USER_ERROR:return"";case N.FIND_BARS_SUCCESS:return t.userId||"";default:return e}},username:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Guest",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.FETCH_USER_SUCCESS:case N.LOGIN_SUCCESS_USER:case N.SIGNUP_SUCCESS_USER:case N.SET_USER_DATA:return t.username;case N.LOGOUT_SUCCESS_USER:case N.SESSION_EXPIRED:case N.FETCH_USER_ERROR:return"Guest";case N.FIND_BARS_SUCCESS:return t.username||"Guest";default:return e}},facebookProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.FETCH_USER_SUCCESS:case N.SET_USER_DATA:return t.profile;case N.LOGIN_SUCCESS_USER:case N.SIGNUP_SUCCESS_USER:case N.LOGOUT_SUCCESS_USER:case N.SESSION_EXPIRED:case N.FETCH_USER_ERROR:return null;case N.FIND_BARS_SUCCESS:return t.profile;default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.LOGIN_SUCCESS_USER:case N.SIGNUP_SUCCESS_USER:case N.SIGNUP_ERROR_USER:case N.LOGIN_ERROR_USER:case N.ADD_BAR_ERROR:case N.REMOVE_BAR_ERROR:case N.FIND_LOCATION_ERROR:case N.FIND_BARS_ERROR:case N.SHOW_VISITORS_LIST_ERROR:case N.SHOW_MESSAGE_DIALOG:case N.SHOW_BASKET_ERROR:case N.ZERO_RESULTS_SEARCH_ERROR:case N.FACEBOOK_LOGIN_SUCCESS:case N.FACEBOOK_LOGIN_ADD_SUCCESS:case N.FACEBOOK_LOGIN_ADD_ERROR:return[].concat(oa(e),[t.message]);case N.CLOSE_MESSAGE_DIALOG:return[];default:return e}},bars:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.FETCH_USER_ERROR:case N.SESSION_EXPIRED:case N.LOGOUT_SUCCESS_USER:return[];case N.LOGIN_SUCCESS_USER:case N.FETCH_USER_SUCCESS:case N.SET_USER_DATA:return t.bars||[];case N.FIND_BARS_SUCCESS:return t.userBars||[];case N.ADD_BAR_TO_USER:return[].concat(oa(e),[t.barId]);case N.REMOVE_BAR_FROM_USER:var r=oa(e),n=r.indexOf(t.barId);return n>=0&&r.splice(n,1),r;default:return e}},basket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.FETCH_USER_ERROR:case N.SESSION_EXPIRED:case N.LOGOUT_SUCCESS_USER:case N.SHOW_BASKET_ERROR:return[];case N.SHOW_BASKET_SUCCESS:return t.basketList||[];case N.REMOVE_BAR_FROM_USER:var r=oa(e),n=r.findIndex(function(e){return e.barId===t.barId});return n>=0&&r.splice(n,1),r;default:return e}}}),sa=Object($n.combineReducers)({service:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.SET_MAP_SERVICE:return t.service;default:return e}}}),ca=Object($n.combineReducers)({bar:ea,location:aa,user:ia,map:sa,returnPath:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.SAVE_PATH:return t.path;default:return e}},guestBar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.FETCH_USER_ERROR:case N.LOGOUT_SUCCESS_USER:case N.ADD_BAR_ERROR:case N.FIND_LOCATION_ERROR:case N.FIND_BARS_ERROR:case N.ADD_TO_VISITORS_LIST_SUCCESS:case N.ADD_BAR_SUCCESS:return null;case N.SAVE_GUEST_BAR:return t.barId;default:return e}},loginDialogOpen:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case N.LOGIN_SUCCESS_USER:case N.SIGNUP_SUCCESS_USER:case N.CLOSE_LOGIN_DIALOG:case N.START_FACEBOOK_LOGIN:return!1;case N.OPEN_LOGIN_DIALOG:return!0;default:return e}},loginMenuOpen:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case N.CLOSE_LOGIN_MENU:return!1;case N.OPEN_LOGIN_MENU:return!0;default:return e}},messageDialogOpen:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case N.CLOSE_MESSAGE_DIALOG:return!1;case N.LOGIN_SUCCESS_USER:case N.SIGNUP_SUCCESS_USER:case N.SIGNUP_ERROR_USER:case N.LOGIN_ERROR_USER:case N.ADD_BAR_ERROR:case N.REMOVE_BAR_ERROR:case N.FIND_LOCATION_ERROR:case N.FIND_BARS_ERROR:case N.SHOW_VISITORS_LIST_ERROR:case N.SHOW_MESSAGE_DIALOG:case N.ZERO_RESULTS_SEARCH_ERROR:case N.FACEBOOK_LOGIN_SUCCESS:case N.FACEBOOK_LOGIN_ADD_SUCCESS:case N.FACEBOOK_LOGIN_ADD_ERROR:return!0;default:return e}},listDialogOpen:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case N.CLOSE_VISITORS_LIST:return!1;case N.SHOW_VISITORS_LIST_SUCCESS:return!0;default:return e}},basketDialogOpen:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case N.CLOSE_BASKET:return!1;case N.SHOW_BASKET_SUCCESS:return!0;default:return e}}}),ua=function(e){var t=[Qn.a];return C.isDebug&&t.push(Jn.a),Object($n.createStore)(Object($n.combineReducers)({reducer:ca}),e,$n.applyMiddleware.apply(void 0,t))};function la(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var pa=function(){var e=function(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){la(o,n,a,i,s,"next",e)}function s(e){la(o,n,a,i,s,"throw",e)}i(void 0)})}}(regeneratorRuntime.mark(function e(t,r,n){var a,o,i,s,h,y,E,O;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=ua(),n&&a.dispatch(Q(n)),o=a.getState(),i={},s=new m.ServerStyleSheets,h=Object(d.createMuiTheme)({palette:{primary:{main:"#1e90ff"},accent:S.a,type:"light"}}),y=Object(u.renderToString)(s.collect(c.a.createElement(m.ThemeProvider,{theme:h},c.a.createElement(f.Provider,{store:a},c.a.createElement(l.StaticRouter,{location:t,context:i},Object(p.renderRoutes)(Yn)))))),E=s.toString(),O='<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <style type="text/css" id="server-side-styles">\n      '.concat(E,'\n    </style>\n    <link href="https://fonts.googleapis.com/css?family=Alegreya+Sans|Poiret+One|Roboto" rel="stylesheet">\n    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBPQYCvM0i495Py8i7GV3wn2odaGbwGPPo&libraries=geometry,drawing,places"><\/script>\n    <link href="/dist/style.css" rel="stylesheet">\n  </head>\n  <body>\n    <div id="root">').concat(y,'</div>\n    <script type="text/javascript" charset="utf-8" >window.__INITIAL_DATA__ = ').concat(b()(o),'<\/script>\n    <script type="text/javascript" charset="utf-8" src="/dist/bundle.js"><\/script>\n  </body>\n</html>\n'),e.abrupt("return",{html:O,context:i});case 10:case"end":return e.stop()}},e)}));return function(t,r,n){return e.apply(this,arguments)}}(),fa=(r(97),r(25)),da=r.n(fa),ma=r(57),ha=r.n(ma),Sa=new da.a.Schema({username:{type:String,unique:!0,sparse:!0},password:String,bars:[String],profile:{givenName:String,familyName:String},facebookId:{type:String,unique:!0,sparse:!0}});Sa.pre("save",function(e){var t=this;t.isModified("password")?ha.a.genSalt(10,function(r,n){r?e(r):ha.a.hash(t.password,n,null,function(r,n){r?e(r):(t.password=n,e())})}):e()}),Sa.methods={comparePassword:function(e,t){ha.a.compare(e,this.password,function(e,r){e?t(e):t(null,r)})}};var ya=da.a.model("User",Sa),ba={deserializeUser:function(e,t){ya.findById(e,function(e,r){t(e,r)})},facebook:function(e,t,r,n){ya.findOne({facebookId:r.id},function(e,t){if(e)return console.log(e),n(e);if(t)return n(null,t);var a=new ya;return a.facebookId=r.id,a.profile.givenName=r.name&&r.name.givenName||"",a.profile.familyName=r.name&&r.name.familyName||"",a.save(function(e){console.log(e),n(e,a)})})},local:function(e,t,r){ya.findOne({username:e},function(e,n){return e?r(e):n?n.comparePassword(t,function(e,t){return t?r(null,n):r(null,!1,{message:"Invalid username or password"})}):r(null,!1,{message:"User not found"})})}},Ea=r(75),Oa=r(74),ga=r(64),Ra=r.n(ga),va=r(63),_a=r.n(va),Ia=r(73),Ca=r.n(Ia),xa=r(72),wa=r.n(xa),Na=r(71),Ta=r.n(Na),Aa=(r(96),new da.a.Schema({barId:{type:String,unique:!0},placeId:{type:String,unique:!0},users:[String]})),Ua=da.a.model("Bar",Aa);function ka(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function La(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){ka(o,n,a,i,s,"next",e)}function s(e){ka(o,n,a,i,s,"throw",e)}i(void 0)})}}function ja(e,t,r){i.a.authenticate("local",function(n,a){return n?r(n):a?e.logIn(a,function(e){return e?t.sendStatus(401):t.json({bars:a.bars,userId:a.id})}):t.sendStatus(401)})(e,t,r)}function Pa(e,t){return e.logout(),t.sendStatus(200)}function Ba(e,t){return Da.apply(this,arguments)}function Da(){return(Da=La(regeneratorRuntime.mark(function e(t,r){var n,a,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isAuthenticated()){e.next=2;break}return e.abrupt("return",r.sendStatus(401));case 2:if(t.user.id===t.body.userId){e.next=4;break}return e.abrupt("return",r.sendStatus(403));case 4:return n=t.body,a=n.userId,o=n.barId,i=n.placeId,e.prev=5,e.next=8,Ua.findOneAndUpdate({barId:o},{$addToSet:{users:a},placeId:i},{upsert:!0});case 8:return e.next=10,ya.findByIdAndUpdate(t.user.id,{$addToSet:{bars:o}});case 10:return e.abrupt("return",r.sendStatus(200));case 13:return e.prev=13,e.t0=e.catch(5),e.prev=15,e.next=18,Ua.findOneAndUpdate({barId:o},{$pull:{users:a}});case 18:return e.next=20,ya.findByIdAndUpdate(t.user.id,{$pull:{bars:o}});case 20:return e.abrupt("return",r.sendStatus(409));case 23:return e.prev=23,e.t1=e.catch(15),e.abrupt("return",r.sendStatus(409));case 26:case"end":return e.stop()}},e,null,[[5,13],[15,23]])}))).apply(this,arguments)}function qa(e,t){return Ga.apply(this,arguments)}function Ga(){return(Ga=La(regeneratorRuntime.mark(function e(t,r){var n,a,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isAuthenticated()){e.next=2;break}return e.abrupt("return",r.sendStatus(401));case 2:if(t.user.id===t.body.userId){e.next=4;break}return e.abrupt("return",r.sendStatus(403));case 4:return n=t.body,a=n.userId,o=n.barId,i=n.placeId,e.prev=5,e.next=8,Ua.findOneAndUpdate({barId:o},{$pull:{users:a}});case 8:return e.next=10,ya.findByIdAndUpdate(t.user.id,{$pull:{bars:o}});case 10:return e.abrupt("return",r.sendStatus(200));case 13:return e.prev=13,e.t0=e.catch(5),e.prev=15,e.next=18,Ua.findOneAndUpdate({barId:o},{$addToSet:{users:a},placeId:i});case 18:return e.next=20,ya.findByIdAndUpdate(t.user.id,{$addToSet:{bars:o}});case 20:return e.abrupt("return",r.sendStatus(409));case 23:return e.prev=23,e.t1=e.catch(15),e.abrupt("return",r.sendStatus(409));case 26:case"end":return e.stop()}},e,null,[[5,13],[15,23]])}))).apply(this,arguments)}function Fa(e,t){return Ma.apply(this,arguments)}function Ma(){return(Ma=La(regeneratorRuntime.mark(function e(t,r){var n,a,o,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.body,a=n.username,o=n.password,i=new ya({username:a,password:o}),e.prev=2,e.next=5,ya.findOne({username:a});case 5:if(!e.sent){e.next=8;break}return e.abrupt("return",r.sendStatus(409));case 8:return e.next=10,i.save();case 10:return s=e.sent,e.abrupt("return",t.logIn(s,function(e){return e?r.sendStatus(401):r.json({userId:s.id})}));case 14:return e.prev=14,e.t0=e.catch(2),e.abrupt("return",r.sendStatus(401));case 17:case"end":return e.stop()}},e,null,[[2,14]])}))).apply(this,arguments)}function Ha(e,t){return Va.apply(this,arguments)}function Va(){return(Va=La(regeneratorRuntime.mark(function e(t,r){var n,a,o,i,s,c,u,l,p,f,d,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=t.query.bars)){e.next=3;break}return e.abrupt("return",r.sendStatus(400));case 3:return e.prev=3,e.next=6,Ua.find({barId:{$in:n}},"barId users");case 6:return a=e.sent,o=a.map(function(e){return{barId:e.barId,count:e.users.length}}),i=t.user||{},s=i.username,c=void 0===s?null:s,u=i.profile,l=void 0===u?null:u,p=i.id,f=void 0===p?null:p,d=i.bars,m=void 0===d?null:d,e.abrupt("return",r.json({visitors:o,currentUserBars:m,username:c,profile:l,userId:f}));case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("return",r.sendStatus(409));case 15:case"end":return e.stop()}},e,null,[[3,12]])}))).apply(this,arguments)}function Wa(e,t){return Ka.apply(this,arguments)}function Ka(){return(Ka=La(regeneratorRuntime.mark(function e(t,r){var n,a,o,i,s,c,u,l,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user){e.next=2;break}return e.abrupt("return",r.sendStatus(401));case 2:return n=t.user,a=n.username,o=void 0===a?null:a,i=n.profile,s=void 0===i?null:i,c=n.id,u=void 0===c?null:c,l=n.bars,p=void 0===l?null:l,e.prev=3,e.abrupt("return",r.json({username:o,profile:s,userId:u,bars:p}));case 7:return e.prev=7,e.t0=e.catch(3),e.abrupt("return",r.sendStatus(409));case 10:case"end":return e.stop()}},e,null,[[3,7]])}))).apply(this,arguments)}function za(e,t){return Ya.apply(this,arguments)}function Ya(){return(Ya=La(regeneratorRuntime.mark(function e(t,r){var n,a,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=t.query.barId)){e.next=3;break}return e.abrupt("return",r.sendStatus(400));case 3:return e.prev=3,e.next=6,Ua.findOne({barId:n},"users");case 6:if(null!=(a=e.sent).users&&0!==a.users.length){e.next=9;break}throw new Error("no data");case 9:return e.next=11,ya.find({_id:{$in:a.users}});case 11:return o=e.sent,i=o.map(function(e){return null==e.profile||null==e.profile.givenName&&null==e.profile.familyName?null!=e.username?e.username:"guest":"".concat(e.profile.givenName," ").concat(e.profile.familyName)}),e.abrupt("return",r.json({visitors:i}));case 16:return e.prev=16,e.t0=e.catch(3),e.abrupt("return",r.sendStatus(409));case 19:case"end":return e.stop()}},e,null,[[3,16]])}))).apply(this,arguments)}function $a(e,t){return Za.apply(this,arguments)}function Za(){return(Za=La(regeneratorRuntime.mark(function e(t,r){var n,a,o,i,s,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user){e.next=2;break}return e.abrupt("return",r.sendStatus(401));case 2:return n=t.user,a=n.username,o=n.profile,i=n.id,s=n.bars,e.prev=3,e.next=6,Ua.find({barId:{$in:s}},"barId placeId");case 6:return c=e.sent,u=c.map(function(e){return{barId:e.barId,placeId:e.placeId}}),e.abrupt("return",r.json({currentUserBars:u,username:a,profile:o,userId:i}));case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",r.sendStatus(409));case 14:case"end":return e.stop()}},e,null,[[3,11]])}))).apply(this,arguments)}function Qa(e,t){return Xa.apply(this,arguments)}function Xa(){return(Xa=La(regeneratorRuntime.mark(function e(t,r){var n,a,o,i,s,c,u,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.user.id,a=!1,o=!1,!t.session.bar){e.next=29;break}return a=!0,i=n,s=t.session.bar,c=s.barId,u=s.placeId,t.session.bar=null,e.prev=8,e.next=11,Ua.findOneAndUpdate({barId:c},{$addToSet:{users:i},placeId:u},{upsert:!0});case 11:return e.next=13,ya.findByIdAndUpdate(t.user.id,{$addToSet:{bars:c}});case 13:o=!0,e.next=29;break;case 16:return e.prev=16,e.t0=e.catch(8),e.prev=18,e.next=21,Ua.findOneAndUpdate({barId:c},{$pull:{users:i}});case 21:return e.next=23,ya.findByIdAndUpdate(t.user.id,{$pull:{bars:c}});case 23:o=!1,e.next=29;break;case 26:e.prev=26,e.t1=e.catch(18),o=!1;case 29:return l="?addOperation=".concat(a),o&&(l="".concat(l,"&addOperationSuccess=").concat(o)),e.abrupt("return",r.redirect("".concat(basename,"/return-from-success-login").concat(l)));case 32:case"end":return e.stop()}},e,null,[[8,16],[18,26]])}))).apply(this,arguments)}function Ja(e,t,r){return eo.apply(this,arguments)}function eo(){return(eo=La(regeneratorRuntime.mark(function e(t,r,n){var a,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.query,o=a.barId,i=a.placeId,o&&i&&(t.session.bar={barId:o,placeId:i}),n();case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function to(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var ro=a()();!function(){var e=process.env.BARCOORDINATOR_MONGOLAB_URI||null.BARCOORDINATOR_MONGOLAB_URI,t={reconnectTries:Number.MAX_VALUE,reconnectInterval:500},r=function(){da.a.connect(e,t,function(e){e?console.log("Error connecting"):console.log("Successfully connected")})};r(),da.a.Promise=global.Promise;var n=da.a.connection;n.on("error",console.error),n.on("disconnected",r)}(),function(e){ba&&ba.deserializeUser&&(e.serializeUser(function(e,t){t(null,e.id)}),e.deserializeUser(ba.deserializeUser)),function(e){e.use(new Ea.Strategy(ba.local))}(e),function(e){var t=process.env.BARCOORDINATOR_FACEBOOK_APP_ID||null.BARCOORDINATOR_FACEBOOK_APP_ID,r=process.env.FACEBOOK_APP_SECRET||null.FACEBOOK_APP_SECRET;e.use(new Oa.Strategy({clientID:t,clientSecret:r,callbackURL:"".concat(C.apiEndpoint,"/auth/facebook/callback"),profileFields:["id","name"]},ba.facebook))}(e)}(i.a),function(e,t){C.isProduction&&e.use(wa()({noCache:!0})),e.use(Ca()()),e.use(_a.a.json()),e.use(_a.a.urlencoded({extended:!0}));var r=Ta()(Ra.a),n=process.env.BARCOORDINATOR_MONGOLAB_URI||null.BARCOORDINATOR_MONGOLAB_URI,o=process.env.BARCOORDINATOR_SESSION_SECRET2||null.BARCOORDINATOR_SESSION_SECRET2;e.use(Ra()({secret:o,resave:!1,saveUninitialized:!1,cookie:{maxAge:864e5},store:new r({url:n,autoReconnect:!0})})),e.use(t.initialize()),e.use(t.session());var i=process.cwd();e.get("/privacypolicy",function(e,t){t.sendFile("".concat(i,"/public/privacypolicy.htm"))}),e.use("/public",a.a.static("".concat(i,"/public"))),e.use("/dist",a.a.static("".concat(i,"/dist")))}(ro,i.a),function(e,t){e.post("/login",ja),e.get("/logout",Pa),e.post("/signup",Fa),e.post("/addBar",Ba),e.post("/removeBar",qa),e.get("/currentUserPlacesData",Ha),e.get("/currentUser",Wa),e.get("/currentUserBasket",$a),e.get("/visitors",za),e.get("/auth/facebook",Ja,t.authenticate("facebook")),e.get("/auth/facebook/callback",t.authenticate("facebook",{failureRedirect:"".concat(C.basename,"/signup")}),Qa)}(ro,i.a),ro.get("*",function(){var e=function(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){to(o,n,a,i,s,"next",e)}function s(e){to(o,n,a,i,s,"throw",e)}i(void 0)})}}(regeneratorRuntime.mark(function e(t,r){var n,a,o,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pa(t.url,t.query,t.user);case 2:n=e.sent,a=n.html,o=n.context,i=o.url,(s=void 0===i?null:i)?(r.writeHead(302,{Location:s}),r.end()):r.send(a);case 7:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}());var no=process.env.PORT||4e3;ro.listen(no,function(){console.log("app listening on port ".concat(no,"\n"))})},function(e,t){e.exports=require("core-js/modules/es.array.find")},function(e,t){e.exports=require("core-js/modules/es.number.constructor")},function(e,t){e.exports=require("core-js/modules/es.array.splice")},function(e,t){e.exports=require("core-js/modules/es.array.slice")},function(e,t){e.exports=require("core-js/modules/es.string.replace")},function(e,t){e.exports=require("core-js/modules/es.parse-int")},function(e,t){e.exports=require("core-js/modules/es.array.fill")},function(e,t){e.exports=require("core-js/modules/es.string.link")},function(e,t){e.exports=require("core-js/modules/es.array.reduce")},function(e,t){e.exports=require("core-js/modules/es.string.trim")},function(e,t,r){e.exports=r(95)}]);